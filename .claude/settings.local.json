{
  "permissions": {
    "allow": [
      "mcp__ide__executeCode",
      "Bash(dir:*)",
      "Bash(python:*)",
      "Bash(python3 << 'PYTHON_EOF'\nimport xml.etree.ElementTree as ET\nimport os\n\ndef extract_document_text\\(docx_path, extract_dir\\):\n    \"\"\"Extract all text from a DOCX file\"\"\"\n    os.system\\(f'cd /tmp && unzip -q \"{docx_path}\" -d {extract_dir} 2>&1'\\)\n    \n    tree = ET.parse\\(f'/tmp/{extract_dir}/word/document.xml'\\)\n    root = tree.getroot\\(\\)\n    \n    # Define namespace\n    ns = {'w': 'http://schemas.openxmlformats.org/wordprocessingml/2006/main'}\n    \n    # Extract all text elements\n    text_elements = []\n    for elem in root.findall\\('.//w:t', ns\\):\n        if elem.text:\n            text_elements.append\\(elem.text\\)\n    \n    return ' '.join\\(text_elements\\)\n\n# Document 1\ndoc1_text = extract_document_text\\(\n    \"/e/erp/documents/Erp Screen Mapping â€“ Sop To System Functional Mapping.docx\",\n    \"docx1\"\n\\)\n\nprint\\(\"=\" * 80\\)\nprint\\(\"DOCUMENT 1: ERP Screen Mapping - SOP to System Functional Mapping\"\\)\nprint\\(\"=\" * 80\\)\nprint\\(doc1_text\\)\nprint\\(\"\\\\n\"\\)\n\nPYTHON_EOF)",
      "Bash(python3:*)",
      "Bash(unzip:*)",
      "Bash(ls:*)",
      "Bash(node --version:*)",
      "Bash(npm:*)",
      "Bash(npx create-next-app@latest:*)",
      "Bash(npx shadcn@latest init:*)",
      "Bash(npx shadcn@latest add button input table dialog select dropdown-menu badge card tabs form toast sheet separator label textarea scroll-area avatar tooltip sonner --yes)",
      "Bash(npx shadcn@latest add:*)",
      "Bash(npx prisma init)",
      "Bash(cd:*)",
      "Bash(node -e:*)",
      "Bash(where:*)",
      "Bash(docker:*)",
      "Bash(npx prisma validate:*)",
      "Bash(npx prisma generate:*)",
      "Bash(npx prisma migrate dev:*)",
      "Bash(npx prisma dev:*)",
      "Bash(npx prisma db seed:*)",
      "Bash(npx next build)",
      "Bash(timeout 15 npx next dev:*)",
      "Bash(timeout 20 npx next dev:*)",
      "Bash(npx ts-node:*)",
      "Bash(npx prisma db push:*)",
      "Bash(npx prisma migrate:*)",
      "Bash(taskkill:*)",
      "Bash(npx kill-port:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(wc:*)",
      "Bash(done)",
      "Bash(npx --no-install prisma generate:*)",
      "Bash(./node_modules/.bin/prisma generate:*)",
      "Bash(sudo chown:*)",
      "Bash(pg_isready:*)",
      "Bash(brew list:*)",
      "Bash(brew install:*)",
      "Bash(brew services:*)",
      "Bash(/opt/homebrew/opt/postgresql@17/bin/createdb nps_erp)",
      "Bash(export PATH=\"/opt/homebrew/opt/postgresql@17/bin:$PATH\")",
      "Bash(grep:*)",
      "Bash(xargs -I {} sh -c 'echo \"\"File: {}\"\" && grep -E \"\"href=|router\\\\.push\"\" {} | head -3')",
      "Bash(npx:*)",
      "Bash(npm_config_cache=/tmp/npm-cache-temp npx:*)",
      "Bash(git -C /Users/adi0220/projects/erp-claude remote:*)",
      "Bash(render:*)",
      "Bash(/e/erp/src/app/api/health/route.ts << 'EOF'\n/**\n * Health Check Endpoint for Render\n * Used for deployment health monitoring\n */\n\nimport { NextResponse } from 'next/server';\nimport { prisma } from '@/lib/prisma';\n\nexport async function GET\\(\\) {\n  try {\n    // Check database connection\n    await prisma.$queryRaw`SELECT 1`;\n\n    return NextResponse.json\\({\n      status: 'healthy',\n      timestamp: new Date\\(\\).toISOString\\(\\),\n      database: 'connected',\n      service: 'nps-erp',\n    }\\);\n  } catch \\(error\\) {\n    return NextResponse.json\\(\n      {\n        status: 'unhealthy',\n        timestamp: new Date\\(\\).toISOString\\(\\),\n        database: 'disconnected',\n        error: error instanceof Error ? error.message : 'Unknown error',\n      },\n      { status: 503 }\n    \\);\n  }\n}\nEOF)",
      "Bash(/e/erp/.env.production.example << 'EOF'\n# Production Environment Variables for Render Deployment\n\n# Database\nDATABASE_URL=\"postgresql://user:password@host:5432/database?schema=public&connection_limit=10&pool_timeout=20\"\nSHADOW_DATABASE_URL=\"postgresql://user:password@host:5432/database_shadow?schema=public\"\n\n# Authentication\nNEXTAUTH_URL=\"https://your-app-name.onrender.com\"\nNEXTAUTH_SECRET=\"your-nextauth-secret-here\"\nJWT_SECRET=\"your-jwt-secret-here\"\n\n# Node Environment\nNODE_ENV=\"production\"\nNODE_OPTIONS=\"--max-old-space-size=4096\"\n\n# Optional: Email Configuration \\(for future use\\)\n# SMTP_HOST=\"smtp.gmail.com\"\n# SMTP_PORT=\"587\"\n# SMTP_USER=\"your-email@gmail.com\"\n# SMTP_PASSWORD=\"your-app-password\"\n# SMTP_FROM=\"noreply@nps-erp.com\"\nEOF)",
      "Bash(node create-admin.js:*)",
      "Bash(DATABASE_URL='postgresql://erp_user:WkuRJfCBZmQw6V9midS2Acqh5bxxOIBA@dpg-d66dqgmsb7us73e7kn20-a.oregon-postgres.render.com/erp_claude?sslmode=require' npx tsx:*)",
      "Bash(find:*)",
      "Bash(git push:*)",
      "Bash(yes:*)",
      "Bash(script -q /dev/null npx prisma migrate dev:*)",
      "Bash(npx tsx:*)",
      "Bash(source:*)",
      "Bash(DATABASE_URL=\"postgresql://adi0220@localhost:5432/nps_erp\" npx tsx:*)",
      "Bash(npx next build:*)",
      "Bash(DATABASE_URL=\"postgresql://adi0220@localhost:5432/nps_erp\" npx tsx -e:*)",
      "Bash(curl:*)",
      "Bash(npm install:*)",
      "Bash(npm run build:*)",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfeat: Implement enhanced masters, quotation PDF, and fix critical audit bugs\n\n- Add new master pages: Buyer, Employee, Unit, Material Code, Financial Year, Company\n- Enhance Customer & Vendor masters with Sheet-based forms, GST, bank details\n- Implement Standard/Non-Standard quotation create flows with NPS/Schedule auto-fill\n- Add quotation PDF generation \\(standard landscape, non-standard portrait\\)\n- Add quotation email with PDF attachments\n- Add offer term templates API and buyer performance report\n- Create 6 missing [id] CRUD routes for master APIs\n- Fix customer.code/vendor.code references \\(field doesn''t exist\\) across 13+ files\n- Fix report page interfaces to match actual API response shapes\n- Fix quotation API to persist sizeNPS, schedule, materialCodeId, uom fields\n- Add authentication to Testing Master GET endpoint\n- Update Prisma schema with enhanced fields and new models\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(npm run dev:*)",
      "Bash(npx puppeteer:*)",
      "Bash(npx prisma db execute:*)",
      "Bash(psql:*)",
      "Bash(/opt/homebrew/opt/postgresql@17/bin/psql:*)",
      "Bash(/opt/homebrew/bin/psql:*)",
      "Bash(/usr/local/bin/psql:*)",
      "Bash(npx tsc:*)",
      "Bash(npx mammoth:*)",
      "Bash(cat:*)",
      "Bash(for endpoint in \"/api/quotations/[id]/pdf\" \"/api/quotations/[id]/email\" \"/api/quotations/[id]/revise\" \"/api/masters/customers/[id]/quotation-history\" \"/api/inventory/stock-issue/[id]\" \"/api/quality/qc-release/[id]\" \"/api/quality/lab-letters/[id]\" \"/api/quality/mtc/[id]\")",
      "Bash(do)",
      "Bash(path=\"/Users/adi0220/projects/erp-claude/src/app/api$endpoint/route.ts\")",
      "Bash(if [ -f \"$path\" ])",
      "Bash(then)",
      "Bash(echo:*)",
      "Bash(else)",
      "Bash(fi)",
      "Bash(npm uninstall:*)",
      "Bash(git -C /Users/adi0220/projects/erp-claude status)",
      "Bash(git -C /Users/adi0220/projects/erp-claude diff)",
      "Bash(git -C /Users/adi0220/projects/erp-claude log --oneline -5)",
      "Bash(git -C /Users/adi0220/projects/erp-claude add:*)",
      "Bash(git -C:*)",
      "WebFetch(domain:nps-erp-web.onrender.com)",
      "Bash(# Check if auto-seed ran - look for user creation in seed files grep -r \"\"email.*@\"\" /Users/adi0220/projects/erp-claude/prisma/seed*)",
      "Bash(head -5 grep -r \"admin.*email\\\\|email.*admin\" /Users/adi0220/projects/erp-claude/prisma/)",
      "Bash(head:*)",
      "Bash(kill %1:*)",
      "WebSearch",
      "WebFetch(domain:ui.shadcn.com)",
      "WebFetch(domain:app.letstranzact.com)",
      "Bash(pip3 install:*)",
      "Bash(/opt/homebrew/Cellar/postgresql@17/17.7_1/bin/psql:*)",
      "Bash(git log:*)",
      "Bash(which psql 2>/dev/null || brew --prefix postgresql 2>/dev/null || ls /opt/homebrew/opt/postgresql*/bin/psql 2>/dev/null || ls /usr/local/opt/postgresql*/bin/psql 2>/dev/null)",
      "Bash(/opt/homebrew/opt/postgresql@14/bin/psql nps_erp:*)",
      "Bash(./node_modules/.bin/prisma db:*)",
      "Bash(node_modules/.bin/prisma db:*)",
      "mcp__ide__getDiagnostics",
      "Bash(xargs sed:*)"
    ]
  }
}
